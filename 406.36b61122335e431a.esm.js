"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[406],{vzUa:(e,n,r)=>{r.r(n),r.d(n,{default:()=>Q});var s=r("ERkP"),l=r("i08G"),a=r("13oN"),i=r("aGrZ"),t=r("q4t4"),d=r("uCKF"),o=r("P0LX"),u=r("hnsu"),c=r("/F87"),m=r("RBMA"),x=r("4iGT"),h=r("N5nB"),j=r("jO91"),p=r("m4FQ"),g=r("QSxP"),v=r("jg1C");function f({onImageChange:e}){const{translate:n}=(0,i.nt)(),r=(0,s.useRef)(null),[t,d]=(0,s.useState)([]);return(0,v.jsxs)(l.rjZ,{container:!0,mt:3,children:[(0,v.jsx)(l.rjZ,{item:!0,xs:4,children:(0,v.jsxs)(l.Kqy,{direction:"row",justifyContent:"space-between",children:[(0,v.jsx)(a.fi,{title:n("insas.photo")}),(0,v.jsx)("input",{type:"file",multiple:!0,onChange:n=>{!function(n){const r=[];for(let e=0;e<n.length;e++)r.push({src:URL.createObjectURL(n[e]),alt:"img1"});d(r),e(n)}(n.target.files)},style:{display:"none"},ref:r,accept:"image/jpeg, image/png, image/jpg"}),(0,v.jsx)(h.u,{title:n("insas.add_new"),children:(0,v.jsx)(h.zx,{size:"small",onClick:()=>r.current&&r.current.click(),variant:"outlined",children:(0,v.jsx)(h.JO,{src:"add"})})})]})}),(0,v.jsx)(l.rjZ,{item:!0,xs:12,mt:2,children:t.length>0&&(0,v.jsx)(a.ri,{isHorizontal:!0,photos:t})})]})}var C=r("45gT");const Z={type:C.Z_(),describe:C.Z_()},y=C.Ry().shape({address:C.Z_().required("Address is required"),complement:C.Z_().required("Complement is required"),zip:C.Z_().max(12).min(5).required("Zip is required"),state:C.Z_().required("State is required"),city:C.Z_().required("City is required"),gate:C.Z_(),petsName:C.Z_(),notes:C.Z_(),title:C.Z_().nullable(),volume:C.Z_().required("Volume is required"),surface:C.Z_().nullable(),groundLevel:C.Z_().nullable(),sanitizer:C.Z_().nullable(),equipments:C.IX().of(C.Ry().shape(Z))});const q=(0,r("ueIs").zo)(h.Zb)({paddingTop:"30px",paddingBottom:"30px",paddingRight:"30px",paddingLeft:"30px"});function b(){const{createNewClient:e,billingAddress:n}=(0,d.CG)((e=>e.client)),{postClientResponse:r}=e,{isLoadingPostBodyWater:t}=(0,d.CG)((e=>e.bodyofwater)),[C,Z]=(0,s.useState)(!1),[b,z]=(0,s.useState)(),_=(0,c.s0)(),w=(0,d.TL)(),{handleSubmit:Q,control:T,formState:{errors:N},getValues:W,setValue:L,reset:S,watch:V}=(0,u.cI)({resolver:(0,x.X)(y),defaultValues:{address:"",complement:"",zip:"",state:"",city:"",gate:"",petsName:"",notes:"",title:void 0,volume:"",surface:void 0,sanitizer:void 0,groundLevel:void 0}}),{enqueueSnackbar:P}=(0,o.Ds)(),{fields:R,append:k,remove:K}=(0,u.Dq)({name:"equipments",control:T}),{translate:F}=(0,i.nt)();return(0,s.useEffect)((()=>{0===R.length&&k({type:"",describe:""})}),[k,R]),(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("form",{onSubmit:Q((async e=>{try{var n;const s=null==r||null==(n=r.data)?void 0:n.id;await w((0,p.Zi)({data:Object.assign({},e,{photos:b}),accountId:s})).unwrap(),_("/dashboard/clients"),P("Body of water created successfully",{variant:"success"})}catch(s){P("Unable to register body of water",{variant:"error"})}})),noValidate:!0,children:[(0,v.jsxs)(l.rjZ,{container:!0,spacing:2,mt:2,children:[(0,v.jsx)(l.rjZ,{item:!0,xs:12,sm:5,children:(0,v.jsxs)(q,{children:[(0,v.jsx)(a.fi,{title:F("insas.location_other")}),(0,v.jsxs)(l.rjZ,{container:!0,spacing:2,children:[(0,v.jsx)(l.rjZ,{item:!0,xs:12,children:(0,v.jsx)(u.Qr,{name:"address",control:T,render:({field:{value:e,onChange:n}})=>{var r;return(0,v.jsx)(l.nvn,{label:F("insas.address"),size:"small",value:e,onChange:n,fullWidth:!0,sx:{mt:2},error:!!N.address,helperText:null==(r=N.address)?void 0:r.message,required:!0})}})}),(0,v.jsx)(l.rjZ,{item:!0,xs:12,sm:7,children:(0,v.jsx)(u.Qr,{name:"complement",control:T,render:({field:{value:e,onChange:n}})=>{var r;return(0,v.jsx)(l.nvn,{label:F("insas.complement"),size:"small",value:e,onChange:n,fullWidth:!0,error:!!N.complement,helperText:null==(r=N.complement)?void 0:r.message,required:!0})}})}),(0,v.jsx)(l.rjZ,{item:!0,xs:12,sm:5,children:(0,v.jsx)(u.Qr,{name:"zip",control:T,render:({field:{value:e,onChange:n}})=>{var r;return(0,v.jsx)(l.nvn,{type:"number",label:F("insas.zip"),size:"small",value:e,onChange:n,fullWidth:!0,error:!!N.zip,helperText:null==(r=N.zip)?void 0:r.message,required:!0})}})}),(0,v.jsx)(l.rjZ,{item:!0,xs:12,sm:9,children:(0,v.jsx)(u.Qr,{name:"city",control:T,render:({field:{value:e,onChange:n}})=>{var r;return(0,v.jsx)(l.nvn,{label:F("insas.city"),size:"small",value:e,onChange:n,fullWidth:!0,error:!!N.city,helperText:null==(r=N.city)?void 0:r.message,required:!0})}})}),(0,v.jsx)(l.rjZ,{item:!0,xs:12,sm:3,children:(0,v.jsx)(u.Qr,{name:"state",control:T,render:({field:{value:e,onChange:n}})=>{var r;return(0,v.jsx)(l.nvn,{label:F("insas.state"),size:"small",value:e,onChange:n,fullWidth:!0,error:!!N.state,helperText:null==(r=N.state)?void 0:r.message,required:!0})}})}),(0,v.jsx)(l.rjZ,{item:!0,xs:12,children:(0,v.jsx)(u.Qr,{name:"gate",control:T,render:({field:{value:e,onChange:n}})=>{var r;return(0,v.jsx)(l.nvn,{label:F("insas.gate"),size:"small",value:e,onChange:n,fullWidth:!0,error:!!N.gate,helperText:null==(r=N.gate)?void 0:r.message})}})}),(0,v.jsx)(l.rjZ,{item:!0,xs:12,children:(0,v.jsx)(u.Qr,{name:"petsName",control:T,render:({field:{value:e,onChange:n}})=>{var r;return(0,v.jsx)(l.nvn,{label:"Pet's Name",size:"small",value:e,onChange:n,fullWidth:!0,error:!!N.petsName,helperText:null==(r=N.petsName)?void 0:r.message})}})}),(0,v.jsx)(l.rjZ,{item:!0,xs:12,children:(0,v.jsx)(u.Qr,{name:"notes",control:T,render:({field:{value:e,onChange:n},fieldState:{error:r}})=>(0,v.jsx)(l.nvn,{label:F("insas.notes"),size:"small",value:e,onChange:n,fullWidth:!0,multiline:!0,rows:4,error:Boolean(r),helperText:null==r?void 0:r.message})})}),(0,v.jsx)(l.rjZ,{item:!0,children:(0,v.jsx)(h.zx,{color:"primary",variant:"text",size:"small",onClick:()=>{L("address",(null==n?void 0:n.address)||""),L("complement",(null==n?void 0:n.complement)||""),L("zip",(null==n?void 0:n.zipCode)||""),L("city",(null==n?void 0:n.city)||""),L("state",(null==n?void 0:n.state)||"")},children:F("insas.use_billing_address")})})]})]})}),(0,v.jsx)(l.rjZ,{item:!0,xs:12,md:7,children:(0,v.jsxs)(q,{children:[(0,v.jsx)(a.fi,{title:F("insas.pool_type")}),(0,v.jsx)(l.rjZ,{container:!0,mt:2,children:(0,v.jsx)(l.rjZ,{item:!0,xs:12,md:4.7,children:(0,v.jsx)(u.Qr,{control:T,name:"title",defaultValue:W().title,render:({field:{value:e,onChange:n}})=>(0,v.jsx)(h.Ph,{value:e,onChange:n,fullWidth:!0,arrValues:g.FP,label:"type"})})})}),(0,v.jsxs)(l.rjZ,{container:!0,mt:2,children:[(0,v.jsx)(l.rjZ,{item:!0,xs:7.2,children:(0,v.jsx)(a.fi,{title:F("insas.properties")})}),(0,v.jsx)(l.rjZ,{item:!0,xs:4.8,children:(0,v.jsx)(a.fi,{title:F("insas.equipments")})})]}),(0,v.jsxs)(l.Kqy,{direction:"row",justifyContent:"space-between",children:[(0,v.jsxs)(l.rjZ,{container:!0,direction:"column",xs:5,spacing:2,mt:2,children:[(0,v.jsx)(l.rjZ,{item:!0,children:(0,v.jsx)(u.Qr,{name:"volume",control:T,render:({field:{value:e,onChange:n}})=>{var r;return(0,v.jsx)(l.nvn,{label:"Volume",size:"small",value:e,onChange:n,fullWidth:!0,error:!!N.volume,helperText:null==(r=N.volume)?void 0:r.message,required:!0})}})}),(0,v.jsx)(l.rjZ,{item:!0,children:(0,v.jsx)(u.Qr,{control:T,name:"surface",defaultValue:W().surface,render:({field:{value:e,onChange:n}})=>(0,v.jsx)(h.Ph,{value:e,onChange:n,fullWidth:!0,arrValues:g.Oq,label:"surface"})})}),(0,v.jsx)(l.rjZ,{item:!0,children:(0,v.jsx)(u.Qr,{control:T,name:"groundLevel",defaultValue:W().groundLevel,render:({field:{value:e,onChange:n}})=>(0,v.jsx)(h.Ph,{value:e,onChange:n,fullWidth:!0,arrValues:g.GY,label:"ground_level"})})}),(0,v.jsx)(l.rjZ,{item:!0,children:(0,v.jsx)(u.Qr,{control:T,name:"sanitizer",defaultValue:W().sanitizer,render:({field:{value:e,onChange:n}})=>(0,v.jsx)(h.Ph,{value:e,onChange:n,fullWidth:!0,arrValues:g.QQ,label:"sanitizer"})})})]}),(0,v.jsx)(l.rjZ,{container:!0,xs:5,mt:2,spacing:2,children:(0,v.jsx)(j.Z,{control:T,append:k,fields:R,remove:K,watch:V,errors:N})})]}),(0,v.jsx)(f,{onImageChange:function(e){z(e)}})]})})]}),(0,v.jsx)(l.rjZ,{item:!0,xs:12,children:(0,v.jsx)(l.rjZ,{item:!0,xs:12,children:(0,v.jsx)(l.xuv,{sx:{display:"flex",justifyContent:"flex-end"},mt:4,children:(0,v.jsxs)(l.Kqy,{direction:"row",spacing:2,children:[(0,v.jsx)(h.zx,{sx:{paddingLeft:5,paddingRight:5},onClick:()=>{var e;return _(`/dashboard/clients/${null==r||null==(e=r.data)?void 0:e.id}/location/details`)},variant:"outlined",children:F("insas.add_location_later")}),(0,v.jsx)(a.Vq,{type:"discard",message:"Are you sure you want to discard the changes?",isOpen:C,onCancel:()=>Z(!1),onClose:()=>{Z(!1),S(),_("/dashboard/clients")}}),(0,v.jsx)(m.fl,{type:"submit",variant:"contained",sx:{paddingLeft:5,paddingRight:5},loading:t,children:F("insas.next")})]})})})})]})})}var z=r("Zo66");const _=C.Ry().shape({firstName:C.Z_().required("First name is required"),lastName:C.Z_().required("Last name is required"),phone:C.Z_().required("Phone is required"),additionalPhone:C.Z_(),email:C.Z_().required("E-mail is required").email("Invalid E-mail"),address:C.Z_().required("Address is required"),complement:C.Z_(),zip:C.Z_().max(12).min(5).required("Zip is required"),state:C.Z_().required("State is required"),city:C.Z_().required("City is required")});function w(){const e=(0,d.TL)(),{translate:n}=(0,i.nt)(),r=(0,c.s0)(),{isLoadingPostContactInfo:j}=(0,d.CG)((e=>e.client)),[p,g]=(0,s.useState)([]),[f,C]=(0,s.useState)(!1),{enqueueSnackbar:Z}=(0,o.Ds)(),{control:y,handleSubmit:q,reset:b,formState:{errors:w}}=(0,u.cI)({resolver:(0,x.X)(_),defaultValues:{firstName:"",lastName:"",phone:"",additionalPhone:"",email:"",address:"",complement:"",zip:"",state:"",city:""}});return(0,v.jsx)("form",{onSubmit:q((async n=>{const r=new FormData;r.append("files",p[0]);try{await e((0,t.Uk)({data:n,avatar:0!==p.length?r:void 0})).unwrap(),Z("Contact info created successfully!",{variant:"success"})}catch(s){Z("Unable to register contact info",{variant:"error"})}})),noValidate:!0,children:(0,v.jsxs)(l.rjZ,{container:!0,spacing:2,mt:2,children:[(0,v.jsx)(l.rjZ,{item:!0,xs:12,sm:4,children:(0,v.jsx)(h.Zb,{children:(0,v.jsx)(a.zv,{files:p,setFiles:e=>{g(e)}})})}),(0,v.jsx)(l.rjZ,{item:!0,xs:12,sm:8,children:(0,v.jsx)(h.Zb,{sx:{paddingTop:"65px",paddingBottom:"80px",paddingRight:"40px",paddingLeft:"40px"},children:(0,v.jsx)(l.Kqy,{direction:"column",spacing:2,children:(0,v.jsxs)(l.Kqy,{spacing:3,direction:{xs:"column",sm:"column",md:"row",lg:"row",xl:"row"},children:[(0,v.jsxs)(l.Kqy,{spacing:2,flex:1,children:[(0,v.jsx)(z.K,{title:"Contact"}),(0,v.jsx)(u.Qr,{name:"firstName",control:y,render:({field:{value:e,onChange:n}})=>{var r;return(0,v.jsx)(l.nvn,{label:"First Name",size:"small",value:e,onChange:n,fullWidth:!0,error:!!w.firstName,helperText:null==(r=w.firstName)?void 0:r.message,required:!0})}}),(0,v.jsx)(u.Qr,{name:"lastName",control:y,render:({field:{value:e,onChange:n}})=>{var r;return(0,v.jsx)(l.nvn,{label:"Last Name",size:"small",value:e,onChange:n,fullWidth:!0,error:!!w.lastName,helperText:null==(r=w.lastName)?void 0:r.message,required:!0})}}),(0,v.jsx)(u.Qr,{name:"phone",control:y,render:({field:{value:e,onChange:n}})=>{var r;return(0,v.jsx)(l.nvn,{label:"Phone",size:"small",fullWidth:!0,value:e,onChange:n,error:!!w.phone,helperText:null==(r=w.phone)?void 0:r.message,required:!0})}}),(0,v.jsx)(u.Qr,{name:"additionalPhone",control:y,render:({field:{value:e,onChange:n}})=>(0,v.jsx)(l.nvn,{label:"Additional Phone",size:"small",value:e,onChange:n,fullWidth:!0})}),(0,v.jsx)(u.Qr,{name:"email",control:y,render:({field:{value:e,onChange:n}})=>{var r;return(0,v.jsx)(l.nvn,{label:"E-mail",size:"small",value:e,onChange:n,fullWidth:!0,error:!!w.email,helperText:null==(r=w.email)?void 0:r.message,required:!0})}})]}),(0,v.jsxs)(l.Kqy,{spacing:1,flex:1,children:[(0,v.jsx)(z.K,{sx:{ml:"8px"},title:"Billing Address"}),(0,v.jsx)(l.rjZ,{container:!0,spacing:1,children:(0,v.jsx)(l.rjZ,{item:!0,xs:12,children:(0,v.jsx)(u.Qr,{name:"address",control:y,render:({field:{value:e,onChange:n}})=>{var r;return(0,v.jsx)(l.nvn,{label:"Address",size:"small",value:e,onChange:n,fullWidth:!0,error:!!w.address,helperText:null==(r=w.address)?void 0:r.message,required:!0})}})})}),(0,v.jsxs)(l.rjZ,{container:!0,spacing:1,children:[(0,v.jsx)(l.rjZ,{item:!0,xs:12,sm:6,children:(0,v.jsx)(u.Qr,{name:"complement",control:y,render:({field:{value:e,onChange:n}})=>(0,v.jsx)(l.nvn,{label:"Complement",size:"small",value:e,onChange:n,fullWidth:!0})})}),(0,v.jsx)(l.rjZ,{item:!0,xs:12,sm:6,children:(0,v.jsx)(u.Qr,{name:"zip",control:y,render:({field:{value:e,onChange:n}})=>{var r;return(0,v.jsx)(l.nvn,{type:"number",label:"Zip",size:"small",value:e,onChange:n,fullWidth:!0,error:!!w.zip,helperText:null==(r=w.zip)?void 0:r.message,required:!0})}})})]}),(0,v.jsxs)(l.rjZ,{container:!0,spacing:1,children:[(0,v.jsx)(l.rjZ,{item:!0,xs:12,sm:8,children:(0,v.jsx)(u.Qr,{name:"city",control:y,render:({field:{value:e,onChange:n}})=>{var r;return(0,v.jsx)(l.nvn,{label:"City",size:"small",value:e,onChange:n,fullWidth:!0,error:!!w.city,helperText:null==(r=w.city)?void 0:r.message,required:!0})}})}),(0,v.jsx)(l.rjZ,{item:!0,xs:12,sm:4,children:(0,v.jsx)(u.Qr,{name:"state",control:y,render:({field:{value:e,onChange:n}})=>{var r;return(0,v.jsx)(l.nvn,{label:"State",size:"small",value:e,onChange:n,fullWidth:!0,error:!!w.state,helperText:null==(r=w.state)?void 0:r.message,required:!0})}})})]})]})]})})})}),(0,v.jsx)(l.rjZ,{item:!0,xs:12,children:(0,v.jsx)(l.xuv,{sx:{display:"flex",justifyContent:"flex-end"},mt:4,children:(0,v.jsxs)(l.Kqy,{direction:"row",spacing:2,children:[(0,v.jsx)(h.zx,{sx:{paddingLeft:5,paddingRight:5},onClick:()=>C(!0),children:n("insas.cancel")}),(0,v.jsx)(a.Vq,{type:"discard",message:"Are you sure you want to discard the changes?",isOpen:f,onCancel:()=>C(!1),onClose:()=>{C(!1),b(),r("/dashboard/clients")}}),(0,v.jsx)(m.fl,{type:"submit",variant:"contained",loading:j,sx:{paddingLeft:5,paddingRight:5},children:n("insas.next")})]})})})]})})}function Q(){const{translate:e}=(0,i.nt)(),n=(0,d.TL)(),{createNewClient:r}=(0,d.CG)((e=>e.client)),{activeStep:o}=r;return(0,s.useEffect)((()=>()=>{n((0,t.a5)())}),[n]),(0,v.jsxs)(l.rjZ,{container:!0,spacing:2,children:[(0,v.jsxs)(l.rjZ,{item:!0,xs:12,children:[(0,v.jsxs)(l.Kqy,{spacing:2,children:[(0,v.jsx)(a.aG,{links:[{name:"home",href:"#"},{name:"client_list",href:"/dashboard/clients"},{name:e("createNewClient")}]}),(0,v.jsx)(a.Dx,{title:e("insas.createNewClient")})]}),(0,v.jsx)(l.xuv,{mt:4,children:(0,v.jsx)(a.vF,{activeStep:o,isVertical:!0,stepsText:["contactInfo","location"]})})]}),(0,v.jsxs)(l.rjZ,{item:!0,xs:12,children:[0===o&&(0,v.jsx)(w,{}),1===o&&(0,v.jsx)(b,{})]})]})}}}]);