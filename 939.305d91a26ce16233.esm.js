"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[939],{c36U:(t,e,i)=>{i.r(e),i.d(e,{default:()=>g});var n=i("ERkP"),s=i("P0LX"),a=i("hnsu"),r=i("/F87"),l=i("RBMA"),o=i("i08G"),c=i("13oN"),p=i("N5nB"),d=i("aGrZ"),x=i("q4t4"),u=i("uCKF"),h=i("ueIs");const m=(0,h.zo)(o.xuv)((({theme:t})=>({display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:t.palette.primary.main,color:t.palette.common.white,borderRadius:"50%",height:36,width:36}))),j=(0,h.zo)(o.xuv)((({theme:t})=>({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"start",backgroundColor:t.palette.background.neutral,borderRadius:"8px",padding:"12px 24px",maxWidth:"480px"})));var f=i("jg1C");function _({step:t,isFinalStep:e=!1,icon:i,title:n,description:s,children:a}){const r=(0,o.FgM)(),{translate:l}=(0,d.nt)(),c=(0,o.ach)(r.breakpoints.up("sm"));return(0,f.jsxs)(o.Kqy,{direction:{xs:"column",sm:"row"},justifyContent:"center",spacing:2,children:[(0,f.jsx)(o.ZT$,{variant:"caption",sx:{color:r.palette.text.secondary},children:`${t}\xba ${l("insas.step")}`}),c&&(0,f.jsxs)(o.Kqy,{spacing:2,children:[(0,f.jsx)(m,{children:(0,f.jsx)(p.JO,{src:i,sx:{height:18,width:18}})}),!e&&(0,f.jsx)(o.izJ,{orientation:"vertical",flexItem:!0,variant:"fullWidth",sx:{display:"list-item",width:"20px",height:"40px"}})]}),(0,f.jsxs)(j,{children:[n&&(0,f.jsx)(o.ZT$,{variant:"subtitle2",sx:{color:r.palette.text.secondary},children:n}),s&&(0,f.jsx)(o.ZT$,{variant:"caption",sx:{color:r.palette.text.secondary},children:s}),a]})]})}function g(){const t=(0,u.TL)(),{translate:e}=(0,d.nt)(),i=(0,o.FgM)(),{enqueueSnackbar:h}=(0,s.Ds)(),m=(0,r.s0)(),{technicians:j,isLoadingPostClientsImport:g}=(0,u.CG)((t=>t.client)),{user:v}=(0,u.CG)((t=>t.auth)),[b,y]=(0,n.useState)(null),[C,$]=(0,n.useState)(!1),{handleSubmit:I,control:k,getValues:w,register:q}=(0,a.cI)({defaultValues:{technician:""}}),Z=j.filter((t=>"Technician"===(null==t?void 0:t.role))).map((t=>{var e,i,n;return{value:String(t.id),label:`${null==t||null==(e=t.personalInfo)?void 0:e.firstName} ${null==t||null==(i=t.personalInfo)?void 0:i.lastName}`,image:(null==t||null==(n=t.avatar)?void 0:n.formats.thumbnail.url)||""}}));return(0,n.useEffect)((()=>{t((0,x.$q)())}),[t]),(0,f.jsx)(o.rjZ,{container:!0,spacing:2,children:(0,f.jsxs)(o.rjZ,{item:!0,xs:12,children:[(0,f.jsxs)(o.Kqy,{spacing:2,children:[(0,f.jsx)(c.aG,{links:[{name:"home",href:"#"},{name:"client_list",href:"/dashboard/clients"},{name:e("import")}]}),(0,f.jsx)(c.Dx,{title:`${e("insas.client_other")} ${e("insas.import")}`})]}),(0,f.jsx)(o.xuv,{mt:2,children:(0,f.jsx)(p.Zb,{sx:{padding:"32px"},children:(0,f.jsx)("form",{onSubmit:I((async i=>{if(!b)return $(!0),void h("CSV is required!",{variant:"error"});const n=new FormData;n.append("csv",b),null!=i&&i.technician&&n.append("technician",i.technician);try{await t((0,x.e$)({id:null==v?void 0:v.id,data:n})).unwrap(),h(e("insas.success_import"),{variant:"success"}),m("/dashboard/clients")}catch(s){h(e("insas.error_import"),{variant:"error"})}})),noValidate:!0,children:(0,f.jsxs)(o.Kqy,{justifyContent:"center",alignItems:"center",spacing:4,children:[(0,f.jsx)(o.ZT$,{variant:"subtitle1",sx:{color:i.palette.text.secondary},children:`${e("insas.import_title")}:`}),(0,f.jsxs)(o.Kqy,{justifyContent:"center",alignItems:"start",spacing:2,sx:{maxWidth:"700px"},children:[(0,f.jsx)(_,{step:1,icon:"file",title:e("insas.import_step_1_title"),description:e("insas.import_step_1_description"),children:(0,f.jsx)(p.zx,{fullWidth:!0,size:"small",variant:"outlined",href:"https://emmely.sfo3.cdn.digitaloceanspaces.com/static%2Fclient-import-example.csv",startIcon:(0,f.jsx)(p.JO,{src:"arrow-down",sx:{height:"14px"}}),sx:{mt:1},children:e("insas.download")})}),(0,f.jsx)(_,{step:2,icon:"people",title:e("insas.import_step_2_title"),description:e("insas.import_step_2_description")}),(0,f.jsx)(_,{step:3,icon:"edit-alt",title:e("insas.import_step_3_title"),description:e("insas.import_step_3_description")}),(0,f.jsxs)(_,{step:4,icon:"upload",title:e("insas.import_step_4_title"),description:e("insas.import_step_4_description"),children:[(0,f.jsxs)(o.zxk,{fullWidth:!0,size:"small",variant:"outlined",component:"label",startIcon:(0,f.jsx)(p.JO,{src:"upload",sx:{height:"14px"}}),sx:{mt:1},children:[e("insas.upload"),(0,f.jsx)("input",Object.assign({hidden:!0,accept:".csv",type:"file"},q("file"),{onChange:t=>{var e,i;y(null==t||null==(e=t.target)||null==(i=e.files)?void 0:i[0]),$(!1)}}))]}),b&&(0,f.jsx)(o.ZT$,{variant:"caption",mt:1,sx:{color:i.palette.text.secondary},children:b.name}),C&&(0,f.jsx)(o.ZT$,{variant:"caption",mt:1,sx:{color:i.palette.error.main},children:e("insas.required",{interpolation:e("insas.side_bar_info_file_title")})})]}),(0,f.jsx)(_,{step:5,icon:"person",title:e("insas.import_step_5_title"),children:(0,f.jsx)(a.Qr,{control:k,name:"technician",defaultValue:w().technician,render:({field:{value:t,onChange:i,name:n}})=>(0,f.jsx)(p.Ph,{name:n,fullWidth:!0,value:t,onChange:i,arrValues:Z,label:e("technician"),sx:{background:"#fff",mt:2}})})}),(0,f.jsx)(_,{step:6,isFinalStep:!0,icon:"save",title:e("insas.import_step_6_title"),description:e("insas.import_step_6_description"),children:(0,f.jsx)(l.fl,{type:"submit",loading:g,loadingIndicator:e("insas.loading_import"),fullWidth:!0,size:"small",variant:"contained",startIcon:(0,f.jsx)(p.JO,{src:"save",sx:{height:"14px"}}),sx:{mt:1},children:e("insas.import")})})]})]})})})})]})})}}}]);